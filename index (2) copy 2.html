<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/Img/Company_icon.png">
    <title>TNB Electricity Bill Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #c7fbfd;
            color: #333;

        }

        .header {
            background-color: #cbddf0;
            color: rgb(21, 18, 18);
            padding: 15px;
            text-align: center;
            position: sticky;
            /* Makes it stick to the top */
            top: 0;
            z-index: 900;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .link-area {
            padding: 20px;
            text-align: center;
            background-color: #e9ecef;
            margin-bottom: 30px;
        }

        .link-area p {
            font-size: large;
            padding: 20px;
            text-align: center;
            margin-bottom: 30px;
        }

        .container_tech {
            max-width: fit-content;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 25px;
            scroll-margin-top: 160px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 25px;
            border-radius: 8px;
            scroll-margin-top: 170px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        h1,
        h2 {
            color: #0056b3;
            text-align: center;
        }

        .input-section,
        .output-section {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        input[type="number"],
        select {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        button {
            background-color: #007bff;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .result-table th,
        .result-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        .result-table th {
            background-color: #e2e2e2;
            font-weight: bold;
        }

        .error {
            color: red;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
        }

        .hidden {
            display: none;
        }

        .show-section {
            display: block;
            align-items: center;
            gap: 40px;
            margin: 40px auto;
            max-width: 1000px;
            padding: 30px;
            background-color: #76dcf3;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }


        .flex-section {
            display: flex;
            align-items: flex-start;
            gap: 40px;
            margin: 40px auto;
            max-width: 1000px;
            padding: 30px;
            background-color: #76dcf3;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .flex-section .image-section {
            flex: 0 0 350px;
            max-width: 45%;
        }

        .flex-section .image-section img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 5px;
            object-fit: cover;
        }

        .flex-section .text-section {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-top: 30px;
            /* adjust this to match your target position */
        }


        .flex-section .text-section h2 {
            margin-top: 0;
            color: #0056b3;
            font-size: 1.8em;
        }

        .flex-section .text-section p {
            font-size: 1.1em;
            line-height: 1.6;
        }

        .section-divider {
            margin: 50px auto;
            border: none;
            border-top: 2px solid #ccc;
            width: 80%;
        }

        #monthlyYieldCalculator {
            background-color: #f0f8ff;
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 25px;
            margin: 30px auto;
            max-width: 500px;
            scroll-margin-top: 190px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        #monthlyYieldCalculator label {
            color: #0056b3;
            font-weight: bold;
        }

        #monthlyYieldCalculator input[type="number"],
        #monthlyYieldCalculator select {
            width: 100%;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #b3d4fc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        #monthlyYieldCalculator button {
            background-color: #007bff;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-top: 10px;
        }

        #monthlyYieldCalculator button:hover {
            background-color: #0056b3;
        }

        #monthlyYieldCalculator .error {
            color: red;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
        }

        #monthlyYieldCalculator .output-section {
            margin-top: 20px;
            background: #e6f7ff;
            border-radius: 6px;
            padding: 15px;
            font-size: 1.1em;
        }

        /* Style all images inside the TnbBillImage container */
        .TnbBillImage img {
            width: fit-content;
            /* Set a fixed width for all images */
            height: fit-content;
            /* Maintain aspect ratio */
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 20px 8px rgba(0, 0, 0, 0.08);
        }

        /* Example: Style only the first image differently */
        .TnbBillImage img:first-child {
            width: fit-content;
            border: 2px solid #9dcaf9;
        }

        #tnbBillRead p {
            text-align: center;
            font-size: 1.2em;
            font-style: italic;
        }

        .image-caption-col {
            font-weight: bold;
            font-size: medium;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .faq-container {
            max-width: 800px;
            margin: 50px auto;
            background-color: #ffffff;
            /* White background for the container */
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            /* Softer shadow */
        }

        .faq h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
            font-size: 2.5em;
            font-weight: 600;
        }

        .faq-item {
            border-bottom: 1px solid #e0e0e0;
            /* Lighter border */
            margin-bottom: 15px;
            overflow: hidden;
            /* Important for the max-height transition */
        }

        .faq-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .faq-question {
            width: 100%;
            background-color: #e9f0f9;
            /* Light blueish background */
            color: #333;
            padding: 15px 20px;
            border: none;
            text-align: left;
            font-size: 1.1em;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 8px;
            /* More rounded corners */
            transition: background-color 0.3s ease, color 0.3s ease;
            outline: none;
            /* Remove outline on focus */
        }

        .faq-question:hover,
        .faq-question:focus {
            background-color: #d6e4f0;
            /* Slightly darker blueish on hover/focus */
        }

        .faq-question.active {
            background-color: #007bff;
            /* Primary blue when active */
            color: white;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .arrow {
            font-size: 1.2em;
            font-weight: bold;
            transition: transform 0.3s ease;
        }

        .faq-question.active .arrow {
            transform: rotate(180deg);
        }

        .faq-answer {
            max-height: 0;
            /* Initially hidden */
            padding: 0 20px;
            background-color: #fefefe;
            /* Very light background for answer */
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            /* Subtle shadow for open answer */
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            /* Use ease-out for smoother closing */
            overflow: hidden;
            /* Ensures content doesn't spill during transition */
        }

        .faq-answer p {
            padding: 15px 0;
            margin: 0;
            line-height: 1.7;
            /* Better readability */
            color: #555;
        }

        /* When the answer is open, expand its max-height */
        .faq-answer.open {
            max-height: 500px;
            /* Generous max-height, make sure it's larger than your largest answer */
            padding: 15px 20px;
        }

        .faq-answer.open img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 10px auto;
        }

        #nemRead img {
            max-width: 100%;
            height: auto;
            /* Ensure aspect ratio is maintained */
        }

        .container_tech .image-section img,
        .container_tech .image-caption-col img {
            max-width: 100%;
            height: auto;
            /* Important to prevent stretching */
            display: block;
            /* Helps with layout */
        }

        #tnbBillRead.container_tech {
            padding: 10px;
        }

        #tnbBillRead img {
            max-width: 100%;
        }


        @media (max-width: 768px) {
            body {
                font-size: 14px;
            }

            .header h1 {
                font-size: 1.5em; /* Reduced font size for the h1 in the header */
            }
            .header {
                padding: 10px; /* Reduced padding for a smaller header */
            }

            .header p {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 10px;
                margin-bottom: 20px;
            }

            .flex-section {
                flex-direction: column;
                gap: 20px;
                padding: 20px;
            }

            .flex-section .image-section {
                max-width: 100%;
            }

            .flex-section .text-section h2 {
                font-size: 1.5em;
            }

            .flex-section .text-section p {
                font-size: 1em;
            }

            .image-caption-col {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 100%;
            }
            
            .TnbBillImage img {
                width: 100%;
                height: auto;
            }

            .result-table th, .result-table td {
                padding: 8px;
                font-size: 0.9em;
            }

            .faq h1 {
                font-size: 2em;
            }
            
            .faq-question {
                padding: 12px 15px;
                font-size: 1em;
            }
            
            .faq-answer p {
                padding: 10px 0;
                font-size: 0.95em;
            }
        }
        
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.2em; /* Further reduced font size for very small screens */
            }
            .header {
                padding: 5px; /* Even smaller padding for very small screens */
            }
            .link-area p {
                font-size: small;
                padding: 10px;
            }
            .container, .container_tech, .faq-container {
                padding: 15px;
            }
            h1 {
                font-size: 1.5em;
            }
            h2 {
                font-size: 1.2em;
            }
            input[type="number"], select, button {
                font-size: 14px;
            }
            .result-table th, .result-table td {
                padding: 6px;
                font-size: 0.8em;
            }


        }

    </style>
</head>

<body>

    <div class="header">
        <h1>Welcome to the Solana Tec Guideline!</h1>
        <p>Click the text below to navigate to different sections of this page.</p>
        <p>
            <strong><a href="#readSystemSize">How to know MySystem Size ?</a> |</strong>
            <strong><a href="#monthlyYieldCalculator">System Size Calculator </a> |</strong>
            <strong><a href="#tnbBillRead">How to read My TNB Bill?</a> |</strong>
            <strong><a href="#nemRead">NEM meter</a> |</strong>
            <strong><a href="#tnbCalculator">Tnb Calculator</a> |</strong>
            <strong><a href="#QnA">Frequently Asked Questions</a> |</strong>
        </p>
    </div>

    <div class="link-area">

        <p>
            This guideline is designed to assist users in understanding how to interpret solar system size and
            how to read their TNB electricity bill effectively.<br>
            It provides step-by-step instructions on identifying the relevant information on a solar system
            specification and <br> explains the key components of a typical TNB bill. The guideline also includes
            a corresponding calculator to help <br> users estimate energy production based
            on system size and calculate electricity costs or savings more accurately based on their usage.
        </p>
    </div>

    <div id="readSystemSize" class="container_tech ">
        <h1>How to Read Your Solar System Size ?</h1>

        <div class="show-section">
            <div class="image-section">
                <img src="Img/tnb read/app-1.png" alt="SolisCloud App dashboard with installed capacity highlighted">
            </div>
        </div>

        <div class="show-section">
            <div class="image-section">
                <img src="Img/tnb read/app-2.png" alt="Monthly Yield from SolisCloud">
            </div>
        </div>

        <div class="show-section">
            <div class="image-section">
                <img src="Img/tnb read/app-3.png" alt="Monthly Yield from SolisCloud">
            </div>
        </div>


        <h2>How to check the system performance and compare with our calculated generation?</h2>
        <div class="show-section">

            <div class="image-section">
                <img src="Img/tnb read/app-5.png" alt="Monthly Yield from SolisCloud">
            </div>
        </div>

        <div class="show-section">
            <div class="image-section">
                <h2>Sun Peak by Area and Roof Angle</h2>
                <strong>
                    <p>This chart shows the monthly sun peak hours for different areas and roof angles, which affect
                        your
                        solar panel performance.</p>
                </strong>
                <img src="Img/tnb read/solar system.png" alt="Solar System Peak Sun Hours">
            </div>

        </div>

        <div class="flex-section">
            <div class="image-section">
                <img src="Img/tnb read/app-4.png" alt="Monthly Yield from SolisCloud">
            </div>

            <div id="monthlyYieldCalculator" class="input-section">
                <h2>Monthly Yield Calculator</h2>

                <label for="solarSizeInput">Solar System Size (kW):</label>
                <input type="number" id="solarSizeInput" placeholder="e.g., 6.985" step="0.01">

                <label for="actualYieldInput">Actual Monthly Yield (kWh):</label>
                <input type="number" id="actualYieldInput" placeholder="e.g., 620" step="0.01">

                <label for="areaSelect">Choose Area:</label>
                <select id="areaSelect">
                    <option value="0">JB</option>
                    <option value="1">Austin/Tebrau/Setia Tropika</option>
                    <option value="2">Kluang/Batu Pahat</option>
                    <option value="3">Muar/Malacca</option>
                    <option value="4">KL/Selangor</option>
                </select>

                <label for="angleSelect">Choose Roof Angle Range:</label>
                <select id="angleSelect">
                    <option value="0">5°-15°</option>
                    <option value="1">15°-35°</option>
                    <option value="2">35°-45°</option>
                </select>

                <button onclick="calculateMonthlyYield()">Calculate Monthly Yield</button>

                <div id="monthlyYieldError" class="error"></div>
                <div id="monthlyYieldOutput"></div>
            </div>
        </div>

        <!--PREVIOUSLY COMMENTED OUT CODE
        <div class="flex-section">
            <div class="image-section">
                <h2>Sun Peak by Area and Roof Angle</h2>
                <p>This chart shows the monthly sun peak hours for different areas and roof angles, which affect your solar panel performance.</p>
                <img src="Img/tnb read/solar system.png" alt="Solar System Peak Sun Hours">
            </div>
            <div id="monthlyYieldCalculator" class="input-section">
                <h2>Monthly Yield Calculator</h2>
                <label for="solarSizeInput">Solar System Size (kW):</label>
                <input type="number" id="solarSizeInput" placeholder="e.g., 6.985">

                <label for="areaSelect">Choose Area:</label>
                <select id="areaSelect">
                    <option value="0">JB</option>
                    <option value="1">Austin/Tebrau/Setia Tropika</option>
                    <option value="2">Kluang/Batu Pahat</option>
                    <option value="3">Muar/Malacca</option>
                    <option value="4">KL/Selangor</option>
                </select>

                <label for="angleSelect">Choose Roof Angle Range:</label>
                <select id="angleSelect">
                    <option value="0">5°-15°</option>
                    <option value="1">15°-35°</option>
                    <option value="2">35°-45°</option>
                </select>

                <button onclick="calculateMonthlyYield()">Calculate Monthly Yield</button>
                <div id="monthlyYieldError" class="error"></div>
                <div id="monthlyYieldOutput" class="output-section"></div>

            </div>
        </div>

    -->
    </div>




    <hr class="section-divider">


    <!-- TNB Electricity Bill Calculator Section -->
    <div id="tnbBillRead" class="container_tech">
        <h1>How to Read Your TNB Bill?</h1>

        <div id="tnbBill1" class="flex-section">
            <div class="image-caption-col">
                <img src="Img/tnb read/TNB table.png" alt="TNB Bill Overview 1">
                <div class="img-caption"><strong> Here is the table for New TNB Bill Overview</strong></div>
            </div>
        </div>
    </div>

    <hr class="section-divider">

    <div id="nemRead" class="container_tech">
        <h1>How to Read NEM meter?</h1>

        <div id="nemview" class="flex-section">
            <div class="image-caption-col">
                <img src="Img/tnb read/NEMmeter.png" alt="NEM meter view">
            </div>
        </div>
    </div>

    <hr class="section-divider">

    <div id="tnbCalculator" class="container">
        <h1>TNB Electricity Bill Calculator</h1>

        <div class="input-section">
            <label for="calculationType">Choose Calculation Type:</label>
            <select id="calculationType" onchange="toggleSections()">
                <option value="calculate_bill_general">Calculate Bill from Usage (kWh) - Domestic General Tariff
                </option>
                <option value="calculate_bill_tou">Calculate Bill from Usage (kWh) - Domestic Time-of-Use (ToU)</option>
                <option value="calculate_bill_nd_low_general">Calculate Bill from Usage (kWh) - Non Domestic Low Voltage
                    General</option>
                <option value="calculate_bill_nd_low_tou">Calculate Bill from Usage (kWh) - Non Domestic Low Voltage
                    Time-of-Use (ToU)</option>
                <option value="calculate_bill_nd_medium_general">Calculate Bill from Usage (kWh) - Non Domestic Medium
                    Voltage General</option>
                <option value="calculate_bill_nd_medium_tou">Calculate Bill from Usage (kWh) - Non Domestic Medium
                    Voltage Time-of-Use (ToU)</option>
                <option value="calculate_bill_nd_high_general">Calculate Bill from Usage (kWh) - Non Domestic High
                    Voltage General</option>
                <option value="calculate_bill_nd_high_tou">Calculate Bill from Usage (kWh) - Non Domestic High Voltage
                    Time-of-Use (ToU)</option>
            </select>
        </div>

        <!-- Time-of-Use Tariff Domestic Section -->
        <div id="calculateBillSection" class="input-section">
            <h2>Calculate Bill from Usage (Time-of-Use)</h2>

            <form onsubmit="event.preventDefault(); calculateBillTou();">
                <label for="totalUsage">Total Usage (kWh):</label>
                <input type="number" id="totalUsage" placeholder="e.g., 750">

                <label for="peakPercent">Peak Usage Percentage (%) from 2pm-10pm:</label>
                <input type="number" id="peakPercent" placeholder="e.g., 30" value="30">

                <button type="submit">Calculate Bill</button>
                <div id="calculateBillError" class="error"></div>
            </form>
        </div>

        <div class="output-section hidden" id="billOutput">
            <h2>Estimated Bill Details (Time-of-Use)</h2>
            <table class="result-table">
                <tr>
                    <th colspan="2">Description</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td colspan="2">Total Usage (kWh)</td>
                    <td id="outputTotalUsage"></td>
                </tr>
                <tr>
                    <td colspan="2">Total Peak Usage (kWh)</td>
                    <td id="outputTPeakUsageKWH"></td>
                </tr>
                <tr>
                    <td colspan="2">Total Off-Peak Usage (kWh)</td>
                    <td id="outputTOffPeakUsageKWH"></td>
                </tr>
                <tr>
                    <td colspan="2">Peak Usage Percentage</td>
                    <td id="outputTPeakPercent"></td>
                </tr>
                <tr>
                    <td colspan="2">Off-Peak Usage Percentage</td>
                    <td id="outputTOffPeakPercent"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="text-align: center; font-weight: bold;">Energy Charges</td>
                </tr>
                <tr>
                    <td>Energy (Peak - 1kWh = RM0.2852)</td>
                    <td id="outputPeakUsageKWH"></td>
                    <td id="outputEnergyPeakTotal"></td>
                </tr>
                <tr>
                    <td>Energy (Off-Peak - 1kWh = RM 0.2443)</td>
                    <td id="outputOffPeakUsageKWH"></td>
                    <td id="outputEnergyOffPeakTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Capacity Charge</td>
                    <td id="outputCapacityTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Network Charge</td>
                    <td id="outputNetworkTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Retail Charge</td>
                    <td id="outputRetailTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">EEI Rebate</td>
                    <td id="outputEEIRebate"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Subtotal Before Tax</strong></td>
                    <td id="outputSubtotalBeforeTax"></td>
                </tr>
                <tr>
                    <td colspan="2">Service Tax (8%)</td>
                    <td id="outputServiceTax"></td>
                </tr>
                <tr>
                    <td colspan="2">KWTBB (1.6%)</td>
                    <td id="outputKWTBB"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Total Bill</strong></td>
                    <td id="outputTotalBill"></td>
                </tr>
            </table>
        </div>

        <!-- General Tariff Domestic Section -->
        <div id="generalTariffCalculateBillSection" class="input-section hidden">
            <h2>Calculate Bill from Usage (Domestic General Tariff)</h2>
            <form onsubmit="event.preventDefault(); calculateGeneralBill();">
                <label for="generalUsageInput">Total Usage (kWh):</label>
                <input type="number" id="generalUsageInput" placeholder="e.g., 1200">

                <button type="submit">Calculate Bill</button>
                <div id="generalCalculateBillError" class="error"></div>
            </form>
        </div>

        <div class="output-section hidden" id="generalBillOutput">
            <h2>Estimated Bill Details (Domestic General Tariff)</h2>
            <table class="result-table">
                <tr>
                    <th colspan="2">Description</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td colspan="2">Total Usage (kWh)</td>
                    <td id="generalOutputTotalUsage"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="text-align: center; font-weight: bold;">Energy Charges</td>
                </tr>
                <tr>
                    <td>Energy Charge (Taxable)</td>
                    <td id="generalOutputTaxKwh"></td>
                    <td id="generalOutputEnergyTax"></td>
                </tr>
                <tr>
                    <td>Energy Charge (Non-Taxable)</td>
                    <td id="generalOutputNonTaxKwh"></td>
                    <td id="generalOutputEnergyNT"></td>
                </tr>
                <tr>
                    <td colspan="2">Capacity Charge</td>
                    <td id="generalOutputCapacity"></td>
                </tr>
                <tr>
                    <td colspan="2">Network Charge</td>
                    <td id="generalOutputNetwork"></td>
                </tr>
                <tr>
                    <td colspan="2">Retail Charge</td>
                    <td id="generalOutputRetail"></td>
                </tr>
                <tr>
                    <td colspan="2">EEI Rebate</td>
                    <td id="generalOutputEEI"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Subtotal Before Tax</strong></td>
                    <td id="generalOutputSubtotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Service Tax (8%)</td>
                    <td id="generalOutputServiceTax"></td>
                </tr>
                <tr>
                    <td colspan="2">KWTBB (1.6%)</td>
                    <td id="generalOutputKWTBB"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Total Bill</strong></td>
                    <td id="generalOutputTotalBill"></td>
                </tr>
            </table>
        </div>

        <!-- Non-Domestic Low Voltage General Section -->
        <div id="ndLowGeneralSection" class="input-section hidden">
            <h2>Calculate Bill from Usage (Non-Domestic Low Voltage General)</h2>
            <form onsubmit="event.preventDefault(); calculateNdLowGeneralBill();">
                <label for="ndLowGeneralUsageInput">Total Usage (kWh):</label>
                <input type="number" id="ndLowGeneralUsageInput" placeholder="e.g., 2000">
                <button type="submit">Calculate Bill</button>
                <div id="ndLowGeneralCalculateBillError" class="error"></div>
            </form>
        </div>

        <div class="output-section hidden" id="ndLowGeneralBillOutput">
            <h2>Estimated Bill Details (Non-Domestic Low Voltage General)</h2>
            <table class="result-table">
                <tr>
                    <th colspan="2">Description</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td colspan="2">Total Usage (kWh)</td>
                    <td id="ndLowGeneralOutputTotalUsage"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="text-align: center; font-weight: bold;">Charges</td>
                </tr>
                <tr>
                    <td colspan="2">Energy Charge</td>
                    <td id="ndLowGeneralOutputEnergyTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Capacity Charge</td>
                    <td id="ndLowGeneralOutputCapacity"></td>
                </tr>
                <tr>
                    <td colspan="2">Network Charge</td>
                    <td id="ndLowGeneralOutputNetwork"></td>
                </tr>
                <tr>
                    <td colspan="2">Retail Charge</td>
                    <td id="ndLowGeneralOutputRetail"></td>
                </tr>
                <tr>
                    <td colspan="2">EEI Rebate</td>
                    <td id="ndLowGeneralOutputEEI"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Subtotal</strong></td>
                    <td id="ndLowGeneralOutputSubtotal"></td>
                </tr>
                <tr>
                    <td colspan="2">KWTBB (1.6%)</td>
                    <td id="ndLowGeneralOutputKWTBB"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Total Bill</strong></td>
                    <td id="ndLowGeneralOutputTotalBill"></td>
                </tr>
            </table>
        </div>


        <!-- Non-Domestic Low Voltage Time-of-Use Section -->
        <div id="ndLowTouSection" class="input-section hidden">
            <h2>Calculate Bill from Usage (Non-Domestic Low Voltage Time-of-Use)</h2>
            <form onsubmit="event.preventDefault(); calculateNdLowTouBill();">
                <label for="ndLowTouUsageInput">Total Usage (kWh):</label>
                <input type="number" id="ndLowTouUsageInput" placeholder="e.g., 2000">
                <label for="ndLowTouPeakPercent">Peak Usage Percentage (%) from 2pm-10pm:</label>
                <input type="number" id="ndLowTouPeakPercent" placeholder="e.g., 30" value="30">
                <button type="submit">Calculate Bill</button>
                <div id="ndLowTouCalculateBillError" class="error"></div>
            </form>
        </div>

        <div class="output-section hidden" id="ndLowTouBillOutput">
            <h2>Estimated Bill Details (Non-Domestic Low Voltage Time-of-Use)</h2>
            <table class="result-table">
                <tr>
                    <th colspan="2">Description</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td colspan="2">Total Usage (kWh)</td>
                    <td id="ndLowTouOutputTotalUsage"></td>
                </tr>
                <tr>
                    <td colspan="2">Total Peak Usage (kWh)</td>
                    <td id="ndLowTouOutputPeakUsageKWH"></td>
                </tr>
                <tr>
                    <td colspan="2">Total Off-Peak Usage (kWh)</td>
                    <td id="ndLowTouOutputOffPeakUsageKWH"></td>
                </tr>
                <tr>
                    <td colspan="2">Peak Usage Percentage</td>
                    <td id="ndLowTouOutputPeakPercent"></td>
                </tr>
                <tr>
                    <td colspan="2">Off-Peak Usage Percentage</td>
                    <td id="ndLowTouOutputOffPeakPercent"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="text-align: center; font-weight: bold;">Energy Charges</td>
                </tr>
                <tr>
                    <td>Energy (Peak - 1kWh = RM0.2852)</td>
                    <td id="ndLowTouOutputPeakUsageKWH2"></td>
                    <td id="ndLowTouOutputEnergyPeakTotal"></td>
                </tr>
                <tr>
                    <td>Energy (Off-Peak - 1kWh = RM 0.2443)</td>
                    <td id="ndLowTouOutputOffPeakUsageKWH2"></td>
                    <td id="ndLowTouOutputEnergyOffPeakTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Capacity Charge</td>
                    <td id="ndLowTouOutputCapacityTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Network Charge</td>
                    <td id="ndLowTouOutputNetworkTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Retail Charge</td>
                    <td id="ndLowTouOutputRetailTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">EEI Rebate</td>
                    <td id="ndLowTouOutputEEIRebate"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Subtotal</strong></td>
                    <td id="ndLowTouOutputSubtotal"></td>
                </tr>
                <tr>
                    <td colspan="2">KWTBB (1.6%)</td>
                    <td id="ndLowTouOutputKWTBB"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Total Bill</strong></td>
                    <td id="ndLowTouOutputTotalBill"></td>
                </tr>
            </table>
        </div>

        <!-- Non-Domestic Medium Voltage General Section -->
        <div id="ndMediumGeneralSection" class="input-section hidden">
            <h2>Calculate Bill from Usage (Non-Domestic Medium Voltage General)</h2>
            <form onsubmit="event.preventDefault(); calculateNdMediumGeneralBill();">
                <label for="ndMediumGeneralUsageInput">Total Usage (kWh):</label>
                <input type="number" id="ndMediumGeneralUsageInput" placeholder="e.g., 5000">
                <label for="ndMediumGeneralMaxDemandInput">Maximum Demand (kW):</label>
                <input type="number" id="ndMediumGeneralMaxDemandInput" placeholder="e.g., 120">
                <button type="submit">Calculate Bill</button>
                <div id="ndMediumGeneralCalculateBillError" class="error"></div>
            </form>
        </div>

        <div class="output-section hidden" id="ndMediumGeneralBillOutput">
            <h2>Estimated Bill Details (Non-Domestic Medium Voltage General)</h2>
            <table class="result-table">
                <tr>
                    <th colspan="2">Description</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td colspan="2">Total Usage (kWh)</td>
                    <td id="ndMediumGeneralOutputTotalUsage"></td>
                </tr>
                <tr>
                    <td colspan="2">Maximum Demand (kW)</td>
                    <td id="ndMediumGeneralOutputMaxDemand"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="text-align: center; font-weight: bold;">Charges</td>
                </tr>
                <tr>
                    <td colspan="2">Energy Charge</td>
                    <td id="ndMediumGeneralOutputEnergyTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Capacity Charge</td>
                    <td id="ndMediumGeneralOutputCapacity"></td>
                </tr>
                <tr>
                    <td colspan="2">Network Charge</td>
                    <td id="ndMediumGeneralOutputNetwork"></td>
                </tr>
                <tr>
                    <td colspan="2">Retail Charge</td>
                    <td id="ndMediumGeneralOutputRetail"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Subtotal</strong></td>
                    <td id="ndMediumGeneralOutputSubtotal"></td>
                </tr>
                <tr>
                    <td colspan="2">KWTBB (1.6%)</td>
                    <td id="ndMediumGeneralOutputKWTBB"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Total Bill</strong></td>
                    <td id="ndMediumGeneralOutputTotalBill"></td>
                </tr>
            </table>
        </div>

        <!-- Non-Domestic Medium Voltage Time-of-Use Section -->
        <div id="ndMediumTouSection" class="input-section hidden">
            <h2>Calculate Bill from Usage (Non-Domestic Medium Voltage Time-of-Use)</h2>
            <form onsubmit="event.preventDefault(); calculateNdMediumTouBill();">
                <label for="ndMediumTouUsageInput">Total Usage (kWh):</label>
                <input type="number" id="ndMediumTouUsageInput" placeholder="e.g., 8000">
                <label for="ndMediumTouMaxDemandInput">Maximum Demand (kW):</label>
                <input type="number" id="ndMediumTouMaxDemandInput" placeholder="e.g., 200">
                <label for="ndMediumTouPeakPercent">Peak Usage Percentage (%) from 2pm-10pm:</label>
                <input type="number" id="ndMediumTouPeakPercent" placeholder="e.g., 40" value="40">
                <button type="submit">Calculate Bill</button>
                <div id="ndMediumTouCalculateBillError" class="error"></div>
            </form>
        </div>

        <div class="output-section hidden" id="ndMediumTouBillOutput">
            <h2>Estimated Bill Details (Non-Domestic Medium Voltage Time-of-Use)</h2>
            <table class="result-table">
                <tr>
                    <th colspan="2">Description</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td colspan="2">Total Usage (kWh)</td>
                    <td id="ndMediumTouOutputTotalUsage"></td>
                </tr>
                <tr>
                    <td colspan="2">Maximum Demand (kW)</td>
                    <td id="ndMediumTouOutputMaxDemand"></td>
                </tr>
                <tr>
                    <td colspan="2">Total Peak Usage (kWh)</td>
                    <td id="ndMediumTouOutputPeakUsageKWH"></td>
                </tr>
                <tr>
                    <td colspan="2">Total Off-Peak Usage (kWh)</td>
                    <td id="ndMediumTouOutputOffPeakUsageKWH"></td>
                </tr>
                <tr>
                    <td colspan="2">Peak Usage Percentage</td>
                    <td id="ndMediumTouOutputPeakPercent"></td>
                </tr>
                <tr>
                    <td colspan="2">Off-Peak Usage Percentage</td>
                    <td id="ndMediumTouOutputOffPeakPercent"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="text-align: center; font-weight: bold;">Energy Charges</td>
                </tr>
                <tr>
                    <td>Energy (Peak)</td>
                    <td id="ndMediumTouOutputPeakUsageKWH2"></td>
                    <td id="ndMediumTouOutputEnergyPeakTotal"></td>
                </tr>
                <tr>
                    <td>Energy (Off-Peak)</td>
                    <td id="ndMediumTouOutputOffPeakUsageKWH2"></td>
                    <td id="ndMediumTouOutputEnergyOffPeakTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Capacity Charge</td>
                    <td id="ndMediumTouOutputCapacityTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Network Charge</td>
                    <td id="ndMediumTouOutputNetworkTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Retail Charge</td>
                    <td id="ndMediumTouOutputRetailTotal"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Subtotal</strong></td>
                    <td id="ndMediumTouOutputSubtotal"></td>
                </tr>
                <tr>
                    <td colspan="2">KWTBB (1.6%)</td>
                    <td id="ndMediumTouOutputKWTBB"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Total Bill</strong></td>
                    <td id="ndMediumTouOutputTotalBill"></td>
                </tr>
            </table>
        </div>

        <!-- Non-Domestic High Voltage General Section -->
        <div id="ndHighGeneralSection" class="input-section hidden">
            <h2>Calculate Bill from Usage (Non-Domestic High Voltage General)</h2>
            <form onsubmit="event.preventDefault(); calculateNdHighGeneralBill();">
                <label for="ndHighGeneralUsageInput">Total Usage (kWh):</label>
                <input type="number" id="ndHighGeneralUsageInput" placeholder="e.g., 15000">
                <label for="ndHighGeneralMaxDemandInput">Maximum Demand (kW):</label>
                <input type="number" id="ndHighGeneralMaxDemandInput" placeholder="e.g., 500">
                <button type="submit">Calculate Bill</button>
                <div id="ndHighGeneralCalculateBillError" class="error"></div>
            </form>
        </div>

        <div class="output-section hidden" id="ndHighGeneralBillOutput">
            <h2>Estimated Bill Details (Non-Domestic High Voltage General)</h2>
            <table class="result-table">
                <tr>
                    <th colspan="2">Description</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td colspan="2">Total Usage (kWh)</td>
                    <td id="ndHighGeneralOutputTotalUsage"></td>
                </tr>
                <tr>
                    <td colspan="2">Maximum Demand (kW)</td>
                    <td id="ndHighGeneralOutputMaxDemand"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="text-align: center; font-weight: bold;">Charges</td>
                </tr>
                <tr>
                    <td colspan="2">Energy Charge</td>
                    <td id="ndHighGeneralOutputEnergyTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Capacity Charge</td>
                    <td id="ndHighGeneralOutputCapacity"></td>
                </tr>
                <tr>
                    <td colspan="2">Network Charge</td>
                    <td id="ndHighGeneralOutputNetwork"></td>
                </tr>
                <tr>
                    <td colspan="2">Retail Charge</td>
                    <td id="ndHighGeneralOutputRetail"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Subtotal</strong></td>
                    <td id="ndHighGeneralOutputSubtotal"></td>
                </tr>
                <tr>
                    <td colspan="2">KWTBB (1.6%)</td>
                    <td id="ndHighGeneralOutputKWTBB"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Total Bill</strong></td>
                    <td id="ndHighGeneralOutputTotalBill"></td>
                </tr>
            </table>
        </div>

        <!-- Non-Domestic High Voltage Time-of-Use Section -->
        <div id="ndHighTouSection" class="input-section hidden">
            <h2>Calculate Bill from Usage (Non-Domestic High Voltage Time-of-Use)</h2>
            <form onsubmit="event.preventDefault(); calculateNdHighTouBill();">
                <label for="ndHighTouUsageInput">Total Usage (kWh):</label>
                <input type="number" id="ndHighTouUsageInput" placeholder="e.g., 20000">
                <label for="ndHighTouMaxDemandInput">Maximum Demand (kW):</label>
                <input type="number" id="ndHighTouMaxDemandInput" placeholder="e.g., 800">
                <label for="ndHighTouPeakPercent">Peak Usage Percentage (%) from 2pm-10pm:</label>
                <input type="number" id="ndHighTouPeakPercent" placeholder="e.g., 50" value="50">
                <button type="submit">Calculate Bill</button>
                <div id="ndHighTouCalculateBillError" class="error"></div>
            </form>
        </div>

        <div class="output-section hidden" id="ndHighTouBillOutput">
            <h2>Estimated Bill Details (Non-Domestic High Voltage Time-of-Use)</h2>
            <table class="result-table">
                <tr>
                    <th colspan="2">Description</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td colspan="2">Total Usage (kWh)</td>
                    <td id="ndHighTouOutputTotalUsage"></td>
                </tr>
                <tr>
                    <td colspan="2">Maximum Demand (kW)</td>
                    <td id="ndHighTouOutputMaxDemand"></td>
                </tr>
                <tr>
                    <td colspan="2">Total Peak Usage (kWh)</td>
                    <td id="ndHighTouOutputPeakUsageKWH"></td>
                </tr>
                <tr>
                    <td colspan="2">Total Off-Peak Usage (kWh)</td>
                    <td id="ndHighTouOutputOffPeakUsageKWH"></td>
                </tr>
                <tr>
                    <td colspan="2">Peak Usage Percentage</td>
                    <td id="ndHighTouOutputPeakPercent"></td>
                </tr>
                <tr>
                    <td colspan="2">Off-Peak Usage Percentage</td>
                    <td id="ndHighTouOutputOffPeakPercent"></td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td colspan="3" style="text-align: center; font-weight: bold;">Energy Charges</td>
                </tr>
                <tr>
                    <td>Energy (Peak)</td>
                    <td id="ndHighTouOutputPeakUsageKWH2"></td>
                    <td id="ndHighTouOutputEnergyPeakTotal"></td>
                </tr>
                <tr>
                    <td>Energy (Off-Peak)</td>
                    <td id="ndHighTouOutputOffPeakUsageKWH2"></td>
                    <td id="ndHighTouOutputEnergyOffPeakTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Capacity Charge</td>
                    <td id="ndHighTouOutputCapacityTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Network Charge</td>
                    <td id="ndHighTouOutputNetworkTotal"></td>
                </tr>
                <tr>
                    <td colspan="2">Retail Charge</td>
                    <td id="ndHighTouOutputRetailTotal"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Subtotal</strong></td>
                    <td id="ndHighTouOutputSubtotal"></td>
                </tr>
                <tr>
                    <td colspan="2">KWTBB (1.6%)</td>
                    <td id="ndHighTouOutputKWTBB"></td>
                </tr>
                <tr>
                    <td colspan="2"><strong>Total Bill</strong></td>
                    <td id="ndHighTouOutputTotalBill"></td>
                </tr>
            </table>
        </div>

    </div>

    <hr class="section-divider">

    <div id='QnA' class="faq-container">
        <h1>Frequently Asked Questions</h1>

        <div class="faq-item">
            <button class="faq-question" aria-expanded="false">
                How to read the bill?
                <span class="arrow">▼</span>
            </button>
            <div class="faq-answer">
                <p>Blue colour one is imported unit, which means it’s the electricity supplied by tnb ;
                    green column there record the exported unit, which is the excess
                    electricity from solar during day time. </p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" aria-expanded="false">
                Why the bill shows the electricity from solar is so low around 200 kWh only, but from apps shows 550kWh?
                <span class="arrow">▼</span>
            </button>
            <div class="faq-answer">
                <p>It’s normal, as from the apps, the data shown is the total yield from the solar system , but from the
                    tnb bill, the “Jumlah Export” is the excess electricity
                    from solar during day time. As during day time, when solar system start generating electricity,
                    our home appliance will prior choose to use the electricity from solar, if the electricity from
                    solar is more than the current usage, then the excess will export to tnb, so
                    that’s why the exported unit is surely not equal to the total yield.
                </p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" aria-expanded="false">
                Why the power in the apps never reach the installed capacity ?
                <span class="arrow">▼</span>
            </button>
            <div class="faq-answer">
                <p>
                    16.65 kWp is peak dc power from solar panel (when sun irradiance is 1000W/m2, temperature is 25
                    degree Celsius)
                    9.8 kW is AC power (after conversion from inverter)
                    There is losses during conversion from dc to ac power (can go up to 20%).<br>
                    <strong>Few main cause of losses:</strong>
                <ol>
                    <li>Temperature losses from solar panel (0.34% per degree increased for solar panel surface
                        temperature above 25℃, during super hot day, panel surface temperature can go up to 75℃ which is
                        0.34*(75-25) = 17% losses) </li><br>
                    <li>Inverter conversion losses - about 2% </li><br>
                    <li>Cabling losses - less than 1% </li>
                </ol>
                So it’s normal that the power cannot reach 16.65kWp (DC) , and we had taken into account when doing the
                calculation.
                </p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" aria-expanded="false">
                Why is my bill still high?
                <span class="arrow">▼</span>
            </button>
            <div class="faq-answer">
                <ol>
                    <li>Check if the client is subject to the ICPT (RM 0.1/kWh) charges; if yes, then it's normal.</li><br>
                    <li>Check the timeline of the first TNB bill, as sometimes the meter is changed in the middle of the month, so the data may not be accurate.</li><br>
                    <li>If it is a full month, ask the client whether family members use more electricity after installing the solar system.</li><br>
                    <li>If the client says no, check the total generation from the yield: <br>
                        <ol>
                            <br><li>If the generation is higher than estimation, then it's good news for the client and also means that the high bill is not from the solar system.</li><br>
                            <li>If the generation is lower within 20%, you can check the previous few months' data or check the data from other clients nearby. If the generation for both is lower, it is likely due to weather issues.</li><br>
                        </ol>
                    </li><br>
                </ol>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" aria-expanded="false">
                Why my energy clipping look like cut off?
                <span class="arrow">▼</span>
            </button>
            <div class="faq-answer">
                <p>Energy Clipping: Solar clipping happens when solar electric (photovoltaic) panels provide more power
                    than an inverter can handle. Clipping is lost power production </p>

                <div class="image-section">
                    <img src="Img/tnb read/energyClipping.png"
                        alt="SolisCloud App dashboard with installed capacity highlighted">
                </div>

                <p>Actual sample for energy clipping, for the client who install 16.65kWp system, but install 8kW
                    inverter capacity. </p><br>

                <div class="image-section">
                    <img src="Img/tnb read/energyClipping2.png"
                        alt="SolisCloud App dashboard with installed capacity highlighted">
                </div>

                <p>The maximum capacity reached is around 8.8kW which is about 10% more than the installed capacity.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" aria-expanded="false">
                The common failure that will trigger alarm
                <span class="arrow">▼</span>
            </button>
            <div class="faq-answer">
                <img src="Img/tnb read/TriggerAlarm.png">
            </div>
        </div>

    </div>

    <script src="js/TNB.js"></script>
    <script src="js/QnA.js"></script>
</body>

</html>